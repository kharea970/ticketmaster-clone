server.port=8080
spring.application.name=gateway-service

# Gateway routes
spring.cloud.gateway.default-filters[0]=DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin
spring.cloud.gateway.default-filters[1]=CircuitBreaker=name=defaultCB,fallbackUri=forward:/__fallback
spring.cloud.gateway.default-filters[2]=RemoveHopByHopHeaders=connection,keep-alive,transfer-encoding,te,trailers,proxy-authorization,proxy-authenticate,upgrade

spring.cloud.gateway.routes[0].id=events
spring.cloud.gateway.routes[0].uri=http://event-service:8081
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/events/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1
spring.cloud.gateway.routes[0].filters[1]=RequestRateLimiter=redis-rate-limiter.replenishRate=20,redis-rate-limiter.burstCapacity=40

spring.cloud.gateway.routes[1].id=bookings
spring.cloud.gateway.routes[1].uri=http://booking-service:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/bookings/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[2].id=payments
spring.cloud.gateway.routes[2].uri=http://payment-service:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/payments/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1

spring.cloud.gateway.httpclient.connect-timeout=3000
spring.cloud.gateway.httpclient.response-timeout=5s
spring.cloud.gateway.httpclient.pool.type=ELASTIC

# Redis for rate limiting
spring.data.redis.host=redis
spring.data.redis.port=6379

# Management / Actuator
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.probes.enabled=true

# JWT Resource Server
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://YOUR_ISSUER/.well-known/jwks.json
# spring.security.oauth2.resourceserver.jwt.issuer-uri=https://YOUR_ISSUER/

# CORS (custom)
app.cors.allowed-origins=https://app.yourdomain.com,http://localhost:3000
app.cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true
